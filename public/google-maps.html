<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="/js/geocoding.js"></script>
<script type="text/javascript" src="/js/geotools.js"></script>
<script src="/js/routes.json"></script>

<script>
// function draw_markers(map, data){
//   for (var j in data) {
//     if( j < 10 ){
//       var markers = data[j];
//       for (var i in markers) {
//         var easting_northing = [markers[i].east, markers[i].north];
//         var coords = OSNIGridToLatLong(easting_northing);
//         var lat_lng = new google.maps.LatLng(coords);
//         var marker = new google.maps.Marker({ position: lat_lng, map: map, title: markers[i].stopname });
//       }
//     }
//   }
// }

function draw_markers(map, data){
  var markers = data['route_9A'];
  for (var i in markers) {
    //
    var easting_northing = [markers[i].east, markers[i].north];
    //var coords = OSNIGridToLatLong(easting_northing);
    //console.log("Lat:" + coords.lat + " Lon:" + coords.lon);
    
    irish = new GT_Irish();
    var grid_ref = "J" + markers[i].east + markers[i].north;
    irish.parseGridRef(grid_ref);
    wgs84 = irish.getWGS84();
    var coords = [wgs84.latitude, wgs84.longitude]
    console.log("Lat:" + wgs84.latitude + " Lon:" + wgs84.longitude);
    
    console.log(markers[i].stopname);
    console.log(easting_northing);
    
    var lat_lng = new google.maps.LatLng(coords);
    var marker = new google.maps.Marker({ position: lat_lng, map: map, title: markers[i].stopname });
  }
}

$(document).ready(function() {
  // Setup the map centered on Belfast.
  var latlng = new google.maps.LatLng(54.597677, -5.930042);
  var myOptions = {
    zoom: 14,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  draw_markers(map, myTranslink);
});

//  for (var route in myTranslink) {
    
    
   //var stops = myTranslink[route].length;
   //for (i=0;i<stops;i++) {
   //  
   //  if(count < max){
   //  
   //  //irish=new GT_Irish();
   //  // irish.setGridCoordinates(myTranslink[route][i].east, myTranslink[route][i].north);
   //  //irish.setGridCoordinates('33077', '73746');
   //  //wgs84 = irish.getWGS84();
   //  //console.log("Latitude "+ wgs84.latitude + " Longitude "+wgs84.longitude);
   //  
   //  var coordinate = OSNIGridToLatLong(['33077', '73746']);
   //  var g_coord = google.maps.LatLng(coordinate.lat, coordinate.lon);
   //  
   //  console.log(coordinate);
   //
   //  var marker = new google.maps.Marker({
   //    position: g_coord,
   //    map: map,
   //    title: route +  myTranslink[route][i].stopname
   //  });
   //  marker.setMap(map);
   //  

      
//      }
   //   count++;
</script>
</head>
<body>
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>