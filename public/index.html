<!doctype html>
<title>Translink Metro Lines</title>
<style>
  body {background-color:#fff;font-family:Gill Sans, sans-serif;font-size:10px;text-transform:uppercase}
  h1,h2,h3 {font-weight:normal}
  p {color:#444;width:300px}
  canvas {width:2400px;height:1600px;display:block}
  section {display:block}
</style>
<script src="js/routes.json"></script>
<script src="js/processing.min.js"></script>
<script src="js/init.js"></script>
<section>
<p>Stop order is wrong.
<p>Forked from @carisenda
</section>
<script type="application/processing">
  var MinX = Number.MAX_VALUE;
  var MaxX = Number.MIN_VALUE;
  var MinY = Number.MAX_VALUE;
  var MaxY = Number.MIN_VALUE;
  var MinH = Number.MAX_VALUE;
  var MaxH = Number.MIN_VALUE;

  void setup() {
    size(2400, 1600);  // Size should be the first statement
    background(0);
    stroke(256);
    noFill();
    noLoop();
    PFont fontA = loadFont("Lucida Grande");
    textFont(fontA, 14);
    for (var route in myTranslink) {
      var len = myTranslink[route].length;
      for (i=0;i<len;i++) {
        float x = myTranslink[route][i].east;
        float y = myTranslink[route][i].north;
        if (x > MaxX) {
          MaxX = x;
        }
        if (x < MinX) {
          MinX = x;
        }       
        if (y > MaxY) {
          MaxY = y;
        }
        if (y < MinY) {
          MinY = y;
        }       
      }
    }
  }
  void draw() { 
    for (var route in myTranslink) {
      var len = myTranslink[route].length;
      beginShape();
      for (i=0;i<len;i++) {
        float x = (myTranslink[route][i].east);
        float y = (myTranslink[route][i].north);
        float xx = map(x, MinX, MaxX, 50, 2350);
        float yy = map(y, MinY, MaxY, 1550, 50);
        curveVertex(xx,yy);
       // text(route + myTranslink[route][i].stopname, xx,yy);
      }
      endShape();
    }
  }

  </script>

<canvas></canvas>